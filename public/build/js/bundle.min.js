!function(){"use strict";document.addEventListener("DOMContentLoaded",(function(){if(!document.querySelector(".forum-modal"))return;const e=document.getElementById("closeForumModal"),t=document.getElementById("cancelNewPostBtn"),n=document.getElementById("addCodeBlockBtn"),o=document.getElementById("addImageBtn"),c=document.getElementById("dynamicSections");e&&e.addEventListener("click",()=>{window.location.href="/foro"}),t&&t.addEventListener("click",()=>{window.location.href="/foro"}),n&&c&&n.addEventListener("click",()=>{const e=document.createElement("div");e.classList.add("forum-modal__dynamic-item");const t=document.createElement("button");t.classList.add("remove-item-btn"),t.innerHTML="&times;",t.addEventListener("click",()=>{e.remove()}),e.appendChild(t);const n=document.createElement("label");n.textContent="Bloque de código:",e.appendChild(n);const o=document.createElement("textarea");o.name="blocks_code[]",o.rows=6,o.classList.add("code-snippet"),e.appendChild(o),c.appendChild(e)}),o&&c&&o.addEventListener("click",()=>{const e=document.createElement("div");e.classList.add("forum-modal__dynamic-item");const t=document.createElement("button");t.classList.add("remove-item-btn"),t.innerHTML="&times;",t.addEventListener("click",()=>{e.remove()}),e.appendChild(t);const n=document.createElement("label");n.textContent="Imagen adicional:",e.appendChild(n);const o=document.createElement("input");o.type="file",o.name="blocks_images[]",e.appendChild(o);const d=document.createElement("div");d.classList.add("image-preview-container"),e.appendChild(d),o.addEventListener("change",e=>{const t=e.target.files[0];if(t){const e=new FileReader;e.onload=e=>{d.innerHTML="";const t=document.createElement("img");t.src=e.target.result,d.appendChild(t)},e.readAsDataURL(t)}else d.innerHTML=""}),c.appendChild(e)})}))}(),function(){"use strict";document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("prev-section"),t=document.getElementById("next-section"),n=document.querySelector(".admin-content"),o=document.querySelector(".admin-users"),c=document.querySelector("#admin-content-title");e&&t&&n&&o&&c&&(t.addEventListener("click",()=>{n.style.animation="slideOutRight 0.5s forwards",c.textContent="GESTIÓN DE USUARIOS",setTimeout(()=>{n.style.display="none",o.style.display="block",o.style.animation="slideInLeft 0.5s forwards"},500)}),e.addEventListener("click",()=>{o.style.animation="slideOutLeft 0.5s forwards",c.textContent="GESTIÓN DE CONTENIDO",setTimeout(()=>{o.style.display="none",n.style.display="block",n.style.animation="slideInRight 0.5s forwards"},500)}))}))}(),function(){"use strict";document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelector("#profile_photo_input"),t=document.querySelector("#photoPreview");e&&t&&e.addEventListener("change",(function(e){const n=e.target.files[0];if(n){const e=new FileReader;e.onload=function(e){t.src=e.target.result},e.readAsDataURL(n)}}))}))}(),document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll(".accordion__header").forEach(e=>{e.addEventListener("click",()=>{e.classList.toggle("is-open");const t=e.nextElementSibling;t&&t.classList.contains("accordion__panel")&&t.classList.toggle("is-open")})})}),function(){"use strict";document.addEventListener("DOMContentLoaded",(function(){document.querySelectorAll(".code-block").forEach(e=>{const t=e.querySelector(".code-block__copy-btn");t&&t.addEventListener("click",()=>{const n=e.querySelectorAll(".code-block__line");let o="";n.forEach(e=>{o+=e.textContent}),navigator.clipboard.writeText(o).then(()=>{t.textContent="Copiado!",setTimeout(()=>{t.textContent="Copiar"},2e3)}).catch(e=>{console.error("Error al copiar: ",e)})})})}))}(),function(){"use strict";document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("cancelEditPostBtn");e&&e.addEventListener("click",()=>{window.location.href="/foro"});const t=document.getElementById("deletePostBtn");t&&t.addEventListener("click",()=>{if(!confirm("¿Deseas eliminar esta publicación? No se puede deshacer."))return;window.location.href="/foro/eliminar?id=<?php echo $publicacion->id; ?>"});const n=document.querySelectorAll(".post-edit__remove-item-btn"),o=document.getElementById("editPostForm");n.forEach(e=>{e.addEventListener("click",()=>{const t=e.dataset.media;if(!t)return;const n=e.closest(".post-edit__dynamic-item");n&&(n.style.display="none");const c=document.createElement("input");c.type="hidden",c.name="remove_media[]",c.value=t,o.appendChild(c)})});const c=document.getElementById("addCodeBlockBtn"),d=document.getElementById("addImageBtn"),a=document.getElementById("dynamicSections");c&&a&&c.addEventListener("click",()=>{const e=document.createElement("div");e.classList.add("post-edit__dynamic-item");const t=document.createElement("button");t.type="button",t.classList.add("post-edit__remove-item-btn"),t.innerHTML="&times;",t.addEventListener("click",()=>e.remove()),e.appendChild(t);const n=document.createElement("label");n.textContent="Bloque de código (nuevo):",e.appendChild(n);const o=document.createElement("textarea");o.name="blocks_code[]",o.rows=6,o.classList.add("post-edit__code-snippet"),e.appendChild(o),a.appendChild(e)}),d&&a&&d.addEventListener("click",()=>{const e=document.createElement("div");e.classList.add("post-edit__dynamic-item");const t=document.createElement("button");t.type="button",t.classList.add("post-edit__remove-item-btn"),t.innerHTML="&times;",t.addEventListener("click",()=>e.remove()),e.appendChild(t);const n=document.createElement("label");n.textContent="Imagen adicional (nueva):",e.appendChild(n);const o=document.createElement("input");o.type="file",o.name="blocks_images[]",e.appendChild(o);const c=document.createElement("div");c.classList.add("post-edit__image-preview-container"),e.appendChild(c),o.addEventListener("change",e=>{const t=e.target.files[0];if(t){const e=new FileReader;e.onload=e=>{c.innerHTML="";const t=document.createElement("img");t.src=e.target.result,t.classList.add("post-edit__image-preview"),c.appendChild(t)},e.readAsDataURL(t)}else c.innerHTML=""}),a.appendChild(e)})}))}(),function(){"use strict";document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelector(".main-nav__toggle"),t=document.getElementById("mobileMenu"),n=document.querySelector(".mobile-menu__close"),o=document.querySelector(".main-nav__avatar-btn"),c=document.getElementById("userPanel"),d=document.querySelector(".user-panel__close");e&&t&&e.addEventListener("click",()=>{t.classList.add("mobile-menu--open")}),n&&t&&n.addEventListener("click",()=>{t.classList.remove("mobile-menu--open")}),o&&c&&o.addEventListener("click",()=>{c.classList.add("user-panel--open")}),d&&c&&d.addEventListener("click",()=>{c.classList.remove("user-panel--open")})}))}(),function(){"use strict";document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelector(".post-comments");if(!e)return;const t=e.getAttribute("data-publicacionid"),n=t?parseInt(t):null;n||console.warn("No se encontró un data-publicacionid en la sección .post-comments");const o=e.querySelector(".post-comments__comment-btn");function c(e,t,n){const o=new URLSearchParams;return o.append("publicacion_id",e),t&&o.append("parent_comment_id",t),o.append("texto",n),fetch("/foro/publicacion?id="+e,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:o.toString()}).then(e=>{if(!e.ok)throw new Error("HTTP error! status: "+e.status);return e.text()})}function d(e){"none"===e.style.display||""===e.style.display?e.style.display="block":e.style.display="none"}o&&o.addEventListener("click",()=>{let t=e.querySelector(".post-comments__top-form");t||(t=function(e){const t=document.createElement("div");t.classList.add("post-comments__top-form"),t.style.marginTop="1rem",t.style.display="none";const n=document.createElement("textarea");n.rows=4,n.placeholder="Escribe tu comentario...",n.style.width="100%",n.style.marginBottom="0.5rem";const o=document.createElement("button");return o.type="button",o.textContent="Enviar",o.classList.add("btn","btn-primary"),o.style.cursor="pointer",o.addEventListener("click",()=>{const t=n.value.trim();t?c(e,null,t).then(()=>{window.location.reload()}).catch(e=>{console.error("Error al comentar:",e),alert("Error al comentar")}):alert("Por favor, escribe algo antes de enviar.")}),t.appendChild(n),t.appendChild(o),t}(n),e.appendChild(t)),d(t)}),e.addEventListener("click",(function(e){if(e.target&&e.target.classList.contains("comment-card__responder-btn")){e.preventDefault(),e.stopPropagation();const t=e.target.closest(".comment-card");if(!t)return;const o=t.dataset.commentid;if(!o)return void console.warn("El comentario no tiene un data-commentid válido.");console.log("Responder clickeado en comentario ID:",o);let a=t.querySelector(`.comment-card__reply-form[data-formid="reply-form-${o}"]`);a||(a=function(e,t){const n=document.createElement("div");n.classList.add("comment-card__reply-form"),n.setAttribute("data-formid","reply-form-"+t),n.style.marginTop="1rem",n.style.display="none";const o=document.createElement("textarea");o.rows=4,o.placeholder="Escribe tu respuesta...",o.style.width="100%",o.style.marginBottom="0.5rem";const d=document.createElement("button");return d.type="button",d.textContent="Enviar",d.classList.add("btn","btn-success"),d.style.cursor="pointer",d.addEventListener("click",()=>{const n=o.value.trim();n?c(e,t,n).then(()=>{window.location.reload()}).catch(e=>{console.error("Error al responder:",e),alert("Error al responder")}):alert("Por favor, escribe algo antes de enviar.")}),n.appendChild(o),n.appendChild(d),n}(n,o),t.appendChild(a),console.log("Formulario de respuesta creado para comentario ID:",o)),d(a),console.log("Estado del formulario después del toggle:","none"===a.style.display?"Oculto":"Visible")}}))}))}(),function(){"use strict";document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelector("#editDescriptionBtn"),t=document.querySelector("#profileDescription"),n=document.querySelector("#descriptionContent");e&&t&&n&&e.addEventListener("click",(function(){n.style.display="none",e.style.display="none";const o=document.createElement("textarea");o.classList.add("profile-container__description-textarea"),o.value=n.textContent.trim(),o.rows=5;const c=document.createElement("button");c.textContent="Guardar",c.type="button",c.classList.add("profile-container__description-save");const d=document.createElement("button");d.textContent="Cancelar",d.type="button",d.classList.add("profile-container__description-cancel"),t.appendChild(o),t.appendChild(c),t.appendChild(d),c.addEventListener("click",(function(){const t=o.value.trim();fetch("/perfil",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({description:t})}).then(e=>e.text()).then(a=>{n.textContent=t||"Sin descripción",o.remove(),c.remove(),d.remove(),n.style.display="block",e.style.display="block"}).catch(e=>console.error(e))})),d.addEventListener("click",(function(){o.remove(),c.remove(),d.remove(),n.style.display="block",e.style.display="block"}))}));const o=document.querySelector("#profile_photo_input"),c=document.querySelector("#photoPreview");o&&c&&o.addEventListener("change",(function(e){const t=e.target.files[0];if(t){const e=new FileReader;e.onload=function(e){c.src=e.target.result},e.readAsDataURL(t)}}))}))}(),function(){const e=document.querySelector("#tags_input");if(e){tagsDiv=document.querySelector("#tags"),tagsHiddenInput=document.querySelector('[name="tags"]');let c=[];function t(){tagsDiv.textContent="",c.forEach(e=>{const t=document.createElement("LI");t.classList.add("skill__tag"),t.textContent=e,t.ondblclick=o,tagsDiv.appendChild(t)}),n()}function n(){tagsHiddenInput.value=c.toString()}function o(e){e.target.remove(),c=c.filter(t=>t!==e.target.textContent),n()}""!==tagsHiddenInput.value&&(c=tagsHiddenInput.value.split(","),t()),e.addEventListener("keypress",(function(n){if(44==n.keyCode){if(""===n.target.value.trim()||n.target.value<1)return;n.preventDefault(),c=[...c,n.target.value.trim()],e.value="",t()}}))}}();
//# sourceMappingURL=bundle.js.map
